@using Dexterity.Components.Pages.Messaging.Components
@using Shared.Responses.Patient
@if (_comLoading)
{
    <CommonLoader/>
}
else
{
    <MudItem md="12">
        <MudTabs Elevation="1" Rounded="true" PanelClass="pa-6" ActiveTabClass="border-solid border-2 mud-border-primary">
            <MudTabPanel Text="Sms">
                <SendMessaging PatientList="PatientList"/>
            </MudTabPanel>
            <MudTabPanel Text="Bulk Sms">
                Bulk Sms
            </MudTabPanel>
            <MudTabPanel Text="WhatsApp">
                <SendWhatsApp PatientList="PatientList"/>
            </MudTabPanel>
            <MudTabPanel Text="Email">
                <SendEmail PatientList="PatientList"/>
            </MudTabPanel>
        </MudTabs>
    </MudItem>
}


@code {
    private bool _comLoading;

    private List<PatientListResponse> PatientList { get; set; } = new();

    protected override async Task OnInitializedAsync()
    {
        _comLoading = true;
        await GetPatients();
        _comLoading = false;
    }

    private async Task GetPatients()
    {
        await Task.Delay(2000);
        PatientList = await UnitOfWork.Patient.GetPatients();
    }

}